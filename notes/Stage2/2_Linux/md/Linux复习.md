# Linux入门

继承Unix以网络为核心的设计思想，是一个性能稳定的多用户网络操作系统。支持32位、64位硬件。

![image-20200605214402023](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200605214402.png)

# VMWare与Linux安装

## VMWare安装

![image-20200605214448783](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200605214448.png)

![image-20200605214459654](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200605214459.png)

## CentOS安装

### 1. 检查BIOS虚拟化支持（WIN10)

![image-20200605214555115](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200605214555.png)

![image-20200605214610621](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200605214610.png)

验证VMware是否安装成功：

虚拟化：已启用；

网络连接：有两个VMware是已启用

如过程中需要重启，则按提示操作即可

### 2. 新建虚拟机（只放关键步骤）

![image-20200605214654605](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200605214654.png)

![image-20200605214722819](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200605214722.png)

设置内存为4GB （后面大数据要用）

![image-20200605214804700](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200605214804.png)

![image-20200605214825099](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200605214825.png)

![image-20200605214841652](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200605214841.png)

### 3. 开启虚拟机

等全部自动加载完毕，只设置以下三个位置即可

软件选择：Gnome桌面，完成

安装位置：点进去，点完成

KDUMP：禁用

设置完后，点击开始安装

![image-20200605214917219](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200605214917.png)

设置root密码 （一定记住）安装完毕后根据提示重启，接收许可证即可。

按提示新增一个账户。进入系统后注销账户，在登录页面点击`未列出？`，输入用户名`root`，输入root用户密码，进入管理员账户。

# Linux文件与目录结构

Linux系统中一切皆文件。

![image-20200605215220177](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200605215220.png)

![image-20200605215224338](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200605215224.png)

# VIM编辑器（一级重点）

![image-20200605220838074](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200605220838.png)

# 网络配置和系统管理操作

## 网络配置

![image-20200605220612335](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200605220612.png)

## 系统管理操作

### ifconfig

显示所有网络接口的配置信息

### hostname

查看当前服务器的主机名称

### 修改主机名

linux中 修改当前主机名

```shell
vim /etc/hostname  
```

#### host文件

Linux

```
vim /etc/hosts
```

添加如下内容

`192.168.1.100 hadoop100`

重启设备，重启后，查看主机名，已经修改成功

#### windows部分

修改window10的主机映射文件（hosts文件）

C:\Windows\System32\drivers\etc路径

添加如下内容

`192.168.1.100 hadoop100`

### 临时后台管理

查看服务的方法：**/usr/lib/systemd/system**

systemctl start   服务名     （功能描述：开启服务）

systemctl  stop   服务名     （功能描述：关闭服务）[[L1\]](#_msocom_1) 

systemctl  restart  服务名    （功能描述：重新启动服务）

systemctl  status  服务名    （功能描述：查看服务状态）

systemctl  --type  service     （功能描述：查看正在运行的服务）

### 设置后台服务的自启配置

systemctl  list-unit-files   （功能描述：查看所有服务器自启配置）

systemctl  disable 服务名  （功能描述：关掉指定服务的自动启动）

systemctl  enable  服务名 （功能描述：开启指定服务的自动启动）

systemctl  is-enabled 服务名（功能描述：查看服务开机启动状态）

### 进程运行级别（了解）

3：无桌面级别

5：图形界面级别

0，6不设置，设置了就不能正常启动了。

Linux是多用户，1不用关心。

2不支持网络，不行

4 未使用

![image-20200605220300612](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200605220300.png)

### 关机重启命令

Linux系统中为了提高磁盘的读写效率，对磁盘采取了 **“预读迟写”操作方式**。如果数据还未写入磁盘时，系统掉电或者其他严重问题出现，则将导致数据丢失。

**使用sync指令可以立即将缓冲区的数据写入磁盘。**

**正确的关机流程为**：sync > shutdown > reboot >poweroff

（1）sync          （功能描述：将数据由内存同步到硬盘中）

（2）poweroff       （功能描述：关闭系统，等同于shutdown -h now）

（3）reboot         （功能描述：就是重启，等同于 shutdown -r now）

​    （4）shutdown [选项] 时间 

| 选项 | 功能          |
| ---- | ------------- |
| -h   | -h=halt关机   |
| -r   | -r=reboot重启 |

| 参数 | 功能                                   |
| ---- | -------------------------------------- |
| now  | 立刻关机                               |
| 时间 | 等待多久后关机（时间单位是**分钟**）。 |

## 克隆

### 1. 关闭要被克隆的虚拟机

不关闭无法克隆

### 2. 找到克隆选项

从虚拟机当前状态中创建完整克隆，设置存储位置和虚拟机名称

### 3. 修改克隆机的ip

```shell
vim /etc/sysconfig/network-scripts/ifcfg-eth0
```

修改成你想要的ip

### 4. 修改克隆机的hostname

```shell
vim /etc/hostname
```

### 5. 重启克隆机

### 6. 检查

- ping网络
- ping局域网

### 7. 系统HOST文件增加ip和主机名（为了实现用主机名访问）

LINUX `vim /etc/hosts`

WINDOWS `C:\Windows\System32\drivers\etc\hosts`

# 远程登录（XSHELL)

![image-20200605220509985](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200605220510.png)

# 常用基础命令

## 1. 帮助命令

### 1. man 中文、详细

```shell
man [命令或配置文件]	
```

**有些命令为什么在man中查不到？**

因为它是一个别名，`alias`查看别名

```shell
alias cp='cp -i'
alias egrep='egrep --color=auto'
alias fgrep='fgrep --color=auto'
alias grep='grep --color=auto'
alias l.='ls -d .* --color=auto'
alias ll='ls -l --color=auto'
alias ls='ls --color=auto'
alias mv='mv -i'
alias rm='rm -i'
alias which='alias | /usr/bin/which --tty-only --read-alias --show-dot --show-tilde'
```

### 2. help 英文，shell内置

```shell
help 命令
```

### 3. 常用快捷键

| 常用快捷键  | 功能                         |
| ----------- | ---------------------------- |
| ctrl + c    | 停止进程                     |
| ctrl+l      | 清屏；彻底清屏是：reset      |
| ctrl + q    | 退出                         |
| 善于用tab键 | 提示(更重要的是可以防止敲错) |
| 上下键      | 查找执行过的命令             |
| ctrl +alt   | linux和Windows之间切换       |

## 2. 文件目录类（一级重点）

### 1. pwd 显示当前工作目录的绝对路径

```shell
pwd
```

### 2. ls 列出目录的内容

```shell
ls [选项] [目录或是文件（不加则为当前目录）]
```

| 选项 | 功能                                                       | 备注                           |
| ---- | ---------------------------------------------------------- | ------------------------------ |
| -a   | 全部的文件，连同隐藏档( 开头为 .  的文件) 一起列出来(常用) | -a与ls相似，但-a会显示隐藏文件 |
| -l   | 长数据串列出，包含文件的属性与权限等等数据；(常用)         | -l与ll一样,ll是ls -l的别名     |

文件类型与权限+链接数+文件属主+文件属组+文件大小用byte来表示+建立或最近修改的时间+名字

```shell
-rwxrw-r--. 1 atguigu atguigu   34 5月  27 14:20 test.txt
```

![image-20200606104130438](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200606104130.png)

注意文件夹和文件的区别，不要用有没有后缀来区别。

- 颜色不同
- 文件类型（第一个位置显示的），d是文件夹

新建的时候要注意区分文件、文件夹的命令。

### 3. cd 切换目录

| 参数        | 功能                                 |
| ----------- | ------------------------------------ |
| cd 绝对路径 | **切换路径**   `cd /root/`           |
| cd相对路径  | **切换路径**   `cd 公共的/`          |
| cd ~或者cd  | 回到自己的家目录  （当前用户）       |
| cd -        | 回到上一次所在目录  与cd一样         |
| cd ..       | 回到当前目录的上一级目录             |
| cd -P       | 跳转到实际物理路径，而非快捷方式路径 |

![image-20200606115216994](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200606115217.png)

### 4. mkdir 创建一个新目录

```
mkdir [选项] 要创建的目录
-p	创建多层目录
mkdir 创建目录
```

### 5. rmdir 删除空目录

```
rmdir 空目录
```

### 6. touch 创建空文件

```
touch 文件名称
```

### 7. cp 复制文件或目录

cp实际上是cp -i，即询问是否覆盖，\cp的意思是非别名

```
cp [选项] source dest 	（功能描述：复制source文件到dest）
cp -r dirA dirB  递归赋值A文件夹到B文件夹中
\cp -r dirA dirB 强制覆盖，不提示
```

### 8. rm 移除文件或目录

| 选项 | 功能                                     |
| ---- | ---------------------------------------- |
| -r   | 递归删除目录中所有内容                   |
| -f   | 强制执行删除操作，而不提示用于进行确认。 |
| -v   | 显示指令的详细执行过程                   |

```
rm [选项] deleteFile			（功能描述：递归删除目录中所有内容）
rm -rf dssz/                  递归删除dssz目录中所有内容（危险！）
```

### 9. mv 移动文件与目录或重命名

`./`代表当前目录

```
mv oldNameFile newNameFile	（功能描述：重命名）
mv /temp/movefile  ./targetFolder	（功能描述：移动文件）
```

### 10. 查看文件内容

#### cat

一般查看比较小的文件，**一屏幕能显示全的**。会在命令行屏幕显示内容

```
cat  [选项] 要查看的文件
cat   -n 要查看的文件	                   显示所有行的行号，包括空行。
```

#### more

基于VI编辑器的文本过滤器，会在命令行屏幕显示内容

| 操作            | 功能说明                                  |
| --------------- | ----------------------------------------- |
| 空白键  (space) | 代表向下翻一页；                          |
| Enter           | 代表向下翻『一行』；                      |
| q               | 代表立刻离开  more ，不再显示该文件内容。 |
| Ctrl+F          | 向下滚动一屏                              |
| Ctrl+B          | 返回上一屏                                |
| =               | 输出当前行的行号                          |
| :f              | 输出文件名和当前行的行号                  |

```
more 要查看的文件
```

#### less

根据显示需要加载内容，对于显示**大型文件具有较高的效率**。退出后，当前命令行页面还是干净的，没有文件内容

| 操作       | 功能说明                                           |
| ---------- | -------------------------------------------------- |
| 空白键     | 向下翻动一页；                                     |
| [pagedown] | 向下翻动一页                                       |
| [pageup]   | 向上翻动一页；                                     |
| /字串      | 向下搜寻『字串』的功能；n：向下查找；N：向上查找； |
| ?字串      | 向上搜寻『字串』的功能；n：向上查找；N：向下查找； |
| q          | 离开  less 这个程序；                              |

```
less 要查看的文件
```

### 11. echo 输出内容到控制台

```
echo [选项] [输出内容]
echo -e "\n"   输出换行符  	 -e：  支持反斜线控制的字符转换
echo $变量名
echo $PATH    输出环境变量
```

### 12. 显示文件头（尾）部内容

#### head 

```
head 文件	      （功能描述：查看文件头10行内容）
head -n 5 文件      （功能描述：查看文件头5行内容，5可以是任意行数）

```

#### tail

```
tail  文件 			（功能描述：查看文件后10行内容）
tail  -n 5 文件 		（功能描述：查看文件后5行内容，5可以是任意行数）
tail  -f  文件		（功能描述：实时追踪该文档的所有更新）
```

### 13. 追加和覆盖

#### >> 追加

```
ll >>文件		（功能描述：列表的内容追加到文件aa.txt的末尾）
echo “内容” >> 文件
```

#### > 覆盖

```
ll >文件		（功能描述：列表的内容写入文件a.txt中（覆盖写））
cat 文件1 > 文件2	（功能描述：将文件1的内容覆盖到文件2）
```

### 14. ln 软链接

适用于文件、文件夹

![image-20200606114643213](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200606114643.png)

### 15. history 查看已经执行过历史命令

## 3. 时间日期类

`date [选项]... [日期时间格式]`

| 选项           | 功能                                           |
| -------------- | ---------------------------------------------- |
| -d<时间字符串> | 显示指定的“时间字符串”表示的时间，而非当前时间 |
| -s<日期时间>   | 设置系统日期时间                               |

### 1. date 显示当前时间

有空格就要加双引号了

```
date								（功能描述：显示当前时间）
date +%Y							（功能描述：显示当前年份）
date +%m							（功能描述：显示当前月份）
date +%d							（功能描述：显示当前是哪一天）
date "+%Y-%m-%d %H:%M:%S"			（功能描述：显示年月日时分秒）
```

### 2. date 显示非当前时间

```
date -d '1 days ago'			（功能描述：显示前一天时间）
date -d '-1 days ago'			（功能描述：显示明天时间）
```

### 3. date 设置系统时间

```
date -s 字符串时间
```

### 4. cal 查看日历

```
cal [选项]			（功能描述：不加选项，显示本月日历）
cal 2017 				查看2017年的日历
```

## 4. 用户管理命令（二级重点）

### 1. useradd

```
useradd 用户名
useradd -g 组名 用户名
```

### 2. id 查看用户是否存在

```
id 用户名
```

![image-20200606141301165](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200606141301.png)

### 3. passwd 设置密码

```
passwd 用户名
```

### 4. 查看创建了哪些用户

```
cat  /etc/passwd
```

### 5. 切换用户

切换用户

- root->普通用户：不需密码
- 普通用户->root：需要密码
- 普通用户->普通用户：需要密码

```
su 用户名称   （功能描述：切换用户，只能获得用户的执行权限，不能获得环境变量）
su - 用户名称		（功能描述：切换到用户并获得该用户的环境变量及执行权限）
```

### 6. 删除用户

```
userdel  用户名		（功能描述：删除用户但保存用户主目录）
userdel -r 用户名		（功能描述：用户和用户主目录，都删除）
```

![image-20200606142552473](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200606142552.png)

用户只要一切入，就会为其创建一个线程，那么将无法删除。需要先将process杀掉再删除

### 7. who 查看登录用户信息

```
whoami			（功能描述：显示自身用户名称）
who am i		（功能描述：显示登录用户的用户名）
```

![image-20200606142925462](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200606142925.png)

用root登录的服务器，那么who am i就是显示root用户

whoami是命令行当前用户是谁

### 8. sudo 设置普通用户具有root权限

#### 1. 修改配置文件

`/etc/sudoers`添加`用户名  ALL=(ALL)   ALL`

或者配置成采用sudo命令时不需要输入（只第一次需要输入）`用户名  ALL=(ALL)   NOPASSWD:ALL`

#### 2. 实验sudo

```
[atguigu@hadoop101 opt]$ sudo mkdir module
[root@hadoop101 opt]# chown atguigu:atguigu module/
```

### 9. usermod 修改用户

修改用户的初始登录组，给定的组必须存在

```
usermod -g 用户组 用户名
```

## 5. 用户组管理命令（二级重点）

### 0. 查看有哪些组

```
cat /etc/group
```

### 1. groupadd 新增组

```
groupadd 组名
```

### 2. groupdel 删除组

```
groupdel 组名
```

### 3. groupmod 修改组

```
groupmod -n 新组名 老组名
```

![image-20200606145522985](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200606145523.png)

## 6. 文件权限类（一级重点）

### 1. 文件属性

![image-20200606152453580](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200606152453.png)

从左到右的10个字符表示

![image-20200606152155996](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200606152156.png)

没有权限，就会出现减号[ - ]。

**首位：**

\- 代表文件

 d 代表目录

 l 链接文档(link file)；

**第1-3位：**

确定属主（该文件的所有者）拥有该文件的权限 ---User

**第4-6位：**

确定属组（所有者的同组用户）拥有该文件的权限，---Group

**第7-9位：**

确定其他用户拥有该文件的权限 ---Other

**rxw作用文件和目录的不同解释**

**（1）作用到文件：**

[ r ]代表可读(read): 可以读取，查看

[ w ]代表可写(write): 可以修改，但是不代表可以删除该文件，**删除一个文件的前提条件是对该文件所在的目录有写权限，才能删除该文件.**

[ x ]代表可执行(execute):可以被系统执行

**（2）作用到目录：**

[ r ]代表可读(read): 可以读取，ls查看目录内容

[ w ]代表可写(write): 可以修改，目录内创建+删除+重命名目录

[ x ]代表可执行(execute):可以进入该目录

### 2. chmod 改变权限

u:所有者 g:所有组 o:其他人 a:所有人(u、g、o的总和)

r=4 w=2 x=1    rwx=4+2+1=7

```
chmod  [{ugoa}{+-=}{rwx}] 文件或目录
chmod  [mode=421]  [文件或目录]
```

![image-20200606154018916](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200606154018.png)

### 3. chown 改变所有者

改变文件或者目录的所有者

```
chown [选项] [最终用户] [文件或目录]	
chown -R [最终用户] [文件或目录]	   				递归操作
```

### 4. chgrp 改变所属组

改变文件或者目录的所属组

```
chgrp [最终用户组] [文件或目录]	
```

## 7. 搜索查找类（一级重点）

### 1. find 查找文件或目录（重点）

从指定目录向下递归地遍历其各个子目录，将满足条件的文件显示在终端。

```
find [搜索范围] [选项]
```

| 选项            | 功能                             |
| --------------- | -------------------------------- |
| -name<查询方式> | 按照指定的文件名查找模式查找文件 |
| -user<用户名>   | 查找属于指定用户名所有文件       |
| -size<文件大小> | 按照指定的文件大小查找文件。     |

（1）按文件名：根据名称查找/目录下的filename.txt文件。

```
find xiyou/ -name “*.txt”
find xiyou/ -name “*a*.txt”			文件名包含a
find xiyou/ -name "a.txt”		    文件名为a
```

（2）按拥有者：查找/opt目录下，用户名称为-user的文件

```
find opt/ -user atguigu
```

（3）按文件大小：在/home目录下查找大于200m的文件（+n 大于  -n小于   n等于）

```
find /home -size +204800
find /home -size -204800
find /home -size 204800
```

### 2. grep 过滤查找（重点）

**管道符`|`**

将前一个命令的处理结果输出传递给后面的命令处理

```
格式：grep 选项 查找内容 源文件
ls | grep test						查找某文件
ls | grep -n test	                查找某文件在第几行

cat aa.txt | grep -n cc             文件中cc在第几行
```

### 3. which 查找命令

查找命令在哪个目录下

```
which 命令
```

## 8. 压缩和解压类（一级重点）

### 1. gzip/gunzip 压缩

（1）**只能压缩文件**不能压缩目录

（2）**不保留原来的文件**

```
gzip 文件		（功能描述：压缩文件，只能将文件压缩为*.gz文件）
gunzip 文件.gz	（功能描述：解压缩文件命令）
```

### 2. zip/unzip 压缩

zip 压缩命令在window/linux都通用，**可以压缩目录且保留源文件**。

```
zip  [选项] XXX.zip  将要压缩的内容 		 （压缩文件和目录的命令）
unzip [选项] XXX.zip					 （解压缩文件）
```

| zip选项 | 功能     |
| ------- | -------- |
| -r      | 压缩目录 |

| unzip选项 | 功能                     |
| --------- | ------------------------ |
| -d<目录>  | 指定解压后文件的存放目录 |

```
压缩文件、解压文件到指定目录
zip houma.zip houge.txt bailongma.txt 
unzip houma.zip -d /opt

压缩文件夹、解压文件夹到当前目录
zip demo.zip -r demo
unzip demo.zip
```

### 3. tar打包（重点）

打包目录，压缩后的文件格式`.tar.gz`

```
tar  [选项]  XXX.tar.gz  将要打包进去的内容
```

| 选项   | 功能                 |
| ------ | -------------------- |
| -z     | 打包同时压缩         |
| **-c** | **产生.tar打包文件** |
| -v     | 显示详细信息         |
| -f     | 指定压缩后的文件名   |
| **-x** | **解包.tar文件**     |

![image-20200606161213566](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200606161213.png)

## 9. 磁盘分区类（了解）

### 1. df 查看磁盘空间使用情况

```
df
df -h
```

### 2. fdisk 查看分区

该命令必须在root用户下才能使用

```
fdisk -l
```

### 3. mount/umount 挂载/卸载

#### 1 挂载前准备

必须要有光盘或者已经连接镜像文件

![image-20200606164704698](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200606164704.png)

#### 2 基本语法

```
mount [-t vfstype] [-o options] device dir	（功能描述：挂载设备）
umount 设备文件名或挂载点			（功能描述：卸载设备）
```

![image-20200606164905430](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200606164905.png)

![image-20200606165455512](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200606165455.png)

#### 3. 可以配置开机自动挂载

```
vi /etc/fstab
```

## 10. 进程线程类(一级重点)

进程是正在执行的一个程序或命令，每一个进程都是一个运行的实体，都有自己的地址空间，并占用一定的系统资源。

一个软件可以有多个进程。

### 1. ps 查看当前系统进程状态

```
ps -aux       查看所有进程，一般关注cpu和mem 
ps -aux | grep xxx		（功能描述：查看系统中所有进程）
ps -ef | grep xxx		（功能描述：可以查看子父进程之间的关系）
```

**ps -aux显示信息说明 ** **CPU占用率和内存占用率**

- PID：进程的ID号
- %CPU：该进程占用CPU资源的百分比，占用越高，进程越耗费资源；
- %MEM：该进程占用物理内存的百分比，占用越高，进程越耗费资源；
- C：CPU用于计算执行优先级的因子。数值越大，表明进程是CPU密集型运算，执行优先级会降低；数值越小，表明进程是I/O密集型运算，执行优先级会提高 
- STIME：进程启动的时间
- TTY：完整的终端名称
- TIME：CPU时间 
- CMD：启动进程所用的命令和参数

**ps -ef显示信息说明**  **进程的父进程ID**

UID：用户ID 

PID：进程ID 

PPID：父进程ID 

![image-20200608092015142](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200608092015.png)

![image-20200608091953817](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200608091953.png)

![image-20200608092540442](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200608092540.png)

### 2. kill 终止进程

```
kill  [选项] 进程号		（功能描述：通过进程号杀死进程）
killall 进程名称			（功能描述：通过进程名称杀死进程，也支持通配符，这在系统因负载过大而变得很慢时很有用）	
```

![image-20200608092818369](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200608092818.png)

| 选项 | 功能                 |
| ---- | -------------------- |
| -9   | 表示强迫进程立即停止 |

### 3. pstree 查看进程树（了解）

```
pstree [选项]
```

| 选项 | 功能               |
| ---- | ------------------ |
| -p   | 显示进程的PID      |
| -u   | 显示进程的所属用户 |

### 4. top 查看系统健康状态

```
top [选项]	
```

| 选项    | 功能                                                         |
| ------- | ------------------------------------------------------------ |
| -d 秒数 | 指定top命令每隔几秒更新。默认是3秒在top命令的交互模式当中可以执行的命令： |
| -i      | 使top不显示任何闲置或者僵死进程。                            |
| -p      | 通过指定监控进程ID来仅仅监控某个进程的状态。                 |

| 操作 | 功能                          |
| ---- | ----------------------------- |
| P    | 以CPU使用率排序，默认就是此项 |
| M    | 以内存的使用率排序            |
| N    | 以PID排序                     |
| q    | 退出top                       |

查询结果字段解释了解即可，一般运维来做这些维护。

![image-20200608093600953](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200608093601.png)

### 5. netstat 显示网络统计信息和端口占用情况

```
netstat -anp |grep 进程号	（功能描述：查看该进程网络信息）
netstat -nlp |grep 端口号	（功能描述：查看网络端口号占用情况）
```

| 选项 | 功能                                     |
| ---- | ---------------------------------------- |
| -n   | 拒绝显示别名，能显示数字的全部转化成数字 |
| -l   | 仅列出有在listen（监听）的服务状态       |
| -p   | 表示显示哪个进程在调用                   |

查看所有进程

![image-20200608094557711](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200608094557.png)

过滤，只看22端口

> ：：：22   IPV6的本机写法
>
> 192.168.122.1  IPV4的本机写法

![image-20200608094640401](https://img-1258293749.cos.ap-chengdu.myqcloud.com/20200608094640.png)

## 11. crond 系统定时任务设置(二级重点)

### 1. crond 服务管理

重新启动crond服务（防止服务没开启）

```
systemctl restart crond
```

### 2.crontab 定时任务设置

```
crontab [选项]
crontab -e 				编辑定时任务
crontab -l				查看当前运行的定时任务 
crontab -r 				删除当前用户所有定时任务
```

| 特殊符号 | 含义                                                         |
| -------- | ------------------------------------------------------------ |
| *        | 代表任何时间。比如第一个“*”就代表一小时中每分钟都执行一次的意思。 |
| ，       | 代表不连续的时间。比如“0 8,12,16 * * * 命令”，就代表在每天的8点0分，12点0分，16点0分都执行一次命令 |
| -        | 代表连续的时间范围。比如“0 5 *   * 1-6命令”，代表在周一到周六的凌晨5点0分执行命令 |
| */n      | 代表每隔多久执行一次。比如“*/10 *   * * * 命令”，代表每隔10分钟就执行一遍命令 |

\crontab -e 进入vim页面，编辑* * * * * 执行的任务

| 项目      | 含义                 | 范围                    |
| --------- | -------------------- | ----------------------- |
| 第一个“*” | 一小时当中的第几分钟 | 0-59                    |
| 第二个“*” | 一天当中的第几小时   | 0-23                    |
| 第三个“*” | 一个月当中的第几天   | 1-31                    |
| 第四个“*” | 一年当中的第几月     | 1-12                    |
| 第五个“*” | 一周当中的星期几     | 0-7（0和7都代表星期日） |

| 时间              | 含义                                                         |
| ----------------- | ------------------------------------------------------------ |
| 45 22 * * * 命令  | 在22点45分执行命令                                           |
| 0 17 * * 1 命令   | 每周1 的17点0分执行命令                                      |
| 0 5 1,15 * * 命令 | 每月1号和15号的凌晨5点0分执行命令                            |
| 40 4 * * 1-5 命令 | 每周一到周五的凌晨4点40分执行命令                            |
| */10 4 * * * 命令 | 每天的凌晨4点，每隔10分钟执行一次命令                        |
| 0 0 1,15 * 1 命令 | 每月1号和15号，每周1的0点0分都会执行命令。注意：星期几和几号最好不要同时出现，因为他们定义的都是天。非常容易让管理员混乱。 |

# 软件包管理(一级重点)

## 1. RPM 打包安装

RedHat软件包管理工具

打包安装工具，类似于Windows 中 setup.exe

### 1. 查询  rpm -qa  

```
rpm -qa | grep -i  rpm软件包   忽略大小写-i
rpm -qa | grep  rpm软件包 
rpm -qa  查看已安装的软件
```

### 2. 卸载 rpm -e

```
rpm -e 软件包      卸载（检查依赖）
rpm -e --nodeps 软件包     卸载（不检查依赖，使用该软件包的软件在此之后可能就不能正常工作了。）
```

### 3. 安装 rpm -ivh

```
rpm -ivh 软件包          
-i安装
-v显示详细信息
-h进度条
-nodeps 不检查依赖进度
```

## 2. YUM仓库配置

相当于maven。基于RPM包管理，能够从指定的服务器自动下载RPM包并且安装，可以**自动处理依赖性关系**，并且一次安装所有依赖的软件包，无须繁琐地一次次下载、安装。

```
yum [选项] [参数]
```

### 1. 常用命令

| 选项 | 功能                  |
| ---- | --------------------- |
| -y   | 对所有提问都回答“yes” |

| 参数         | 功能                          |
| ------------ | ----------------------------- |
| install      | 安装rpm软件包                 |
| update       | 更新rpm软件包                 |
| check-update | 检查是否有可用的更新rpm软件包 |
| remove       | 删除指定的rpm软件包           |
| list         | 显示软件包信息                |
| clean        | 清理yum过期的缓存             |
| deplist      | 显示yum软件包的所有依赖关系   |

### 2. 修改网络YUM源

1）前期文件准备

1. 前提条件linux系统必须可以联网
2. 在Linux环境中访问该网络地址：http://mirrors.163.com/.help/centos.html，在使用说明中点击CentOS7->再点击保存
3. 查看文件保存的位置。

2）替换本地yum文件

（1）把下载的文件移动到/etc/yum.repos.d/目录

（2）进入到/etc/yum.repos.d/目录

（3）用CentOS6-Base-163.repo替换CentOS-Base.repo

3）安装命令

```
yum clean all
yum makecache
```

yum makecache就是把服务器的包信息下载到本地电脑缓存起来

4）测试

```
yum list | grep firefox
yum -y install firefox.x86_64
```

## 3. 上传下载文件（会一种就行）

### 1. Xftp

安装xftp，选择sftp模式即可

### 2. lrzsz

```
yum install  lrzsz
```

rz：从本地上传文件至服务器

sz filename：从服务器下载文件至本地

